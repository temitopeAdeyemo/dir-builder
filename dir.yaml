version: 0.2

phases:
  install:
    commands:
      - echo "Installing dependencies"
      - yarn install
  build:
    commands:
      - echo "Building the application"
      - yarn build
  post_build:
    commands:
      - echo "Deploying the application to EC2"
      - scp -r -i "path/to/ec2-key.pem" build ec2-user@ec2-172-31-28-99: /var/www/app
      - ssh -i "path/to/ec2-key.pem" ec2-user@ec2-172-31-28-99 "cd /var/www/app && npm start"
